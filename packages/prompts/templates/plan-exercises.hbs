# Exercise Planning Agent

You are creating a pedagogically sound plan for language learning exercises.

## Validated Requirements

```json
{{requirements}}
```

## Available Exercise Types

{{> exercise-types-details}}

## Your Task

Create a detailed plan for exercises that will help students learn effectively. Consider:

1. **Pedagogical Progression**: Order exercises from input (reading/listening) → understanding (comprehension) → production (writing/speaking)
2. **Cognitive Load**: Start with easier tasks, progress to more challenging
3. **Variety**: Mix different exercise types to maintain engagement
4. **Time Management**: Distribute time appropriately across exercises
5. **Learning Objectives**: Ensure exercises build on each other

## Response Format

Return a JSON object matching this structure:

```json
{
  "exercises": [
    {
      "id": "ex-1",
      "type": "text-passage",
      "title": "Reading: Introduction to [Topic]",
      "description": "A short passage introducing key vocabulary and concepts",
      "estimatedDuration": 5,
      "parameters": {
        "wordCount": 200,
        "difficulty": "appropriate for level",
        "focusArea": "vocabulary introduction"
      },
      "dependencies": []
    },
    {
      "id": "ex-2",
      "type": "multiple-choice",
      "title": "Comprehension Check",
      "description": "Questions testing understanding of the reading passage",
      "estimatedDuration": 10,
      "parameters": {
        "questionCount": 8,
        "focusArea": "reading comprehension"
      },
      "dependencies": ["ex-1"]
    }
  ],
  "totalDuration": 30,
  "sequenceRationale": "Explanation of why exercises are ordered this way",
  "learningObjectives": [
    "Understand key vocabulary related to [topic]",
    "Demonstrate comprehension through multiple choice questions"
  ]
}
```

## Planning Guidelines

### 1. Exercise Sequencing

**Recommended Flow:**
- **Input Phase** (25-30% of time):
  - Start with material providers: `text-passage`, `audio-clip`, `video-content`, `image-prompt`
  - Provide context and introduce vocabulary

- **Comprehension Phase** (35-40% of time):
  - Follow with assessment exercises: `multiple-choice`, `true-false`, `fill-blanks`, `sequencing`
  - Test understanding of input material

- **Production Phase** (30-35% of time):
  - End with production exercises: `short-answer`, `summary-writing`, `opinion-writing`, `discussion-prompt`
  - Students create their own content

### 2. Duration Allocation

- **A1-A2 levels**: Shorter, more exercises (5-10 min each)
- **B1-B2 levels**: Medium length (10-15 min each)
- **C1-C2 levels**: Longer, deeper exercises (15-20 min each)

### 3. Exercise Parameters

Specify parameters that will guide content generation:

**For Multiple Choice:**
```json
{
  "questionCount": 8,
  "optionsPerQuestion": 4,
  "focusArea": "vocabulary|grammar|comprehension"
}
```

**For Fill in Blanks:**
```json
{
  "sentenceCount": 10,
  "blanksPerSentence": 1-2,
  "focusArea": "verb conjugation|prepositions|vocabulary"
}
```

**For Reading Passages:**
```json
{
  "wordCount": 150-500,
  "genre": "informative|narrative|instructional",
  "complexitySentenceStructure": "simple|compound|complex"
}
```

**For Writing Exercises:**
```json
{
  "wordCountTarget": { "min": 50, "max": 150 },
  "format": "paragraph|email|essay|description"
}
```

### 4. Dependencies

Use the `dependencies` array to indicate:
- Exercises that build on previous content
- Comprehension questions that reference specific reading/listening material
- Writing tasks that require prior vocabulary introduction

### 5. Learning Objectives

Articulate 3-5 specific, measurable learning objectives:
- ✅ "Identify and use 15 new vocabulary words related to [topic]"
- ✅ "Demonstrate understanding by answering comprehension questions"
- ✅ "Write a short paragraph using target vocabulary"
- ❌ "Learn about [topic]" (too vague)

## Level-Specific Considerations

### A1 (Beginner)
- Very simple vocabulary and grammar
- Short texts (50-150 words)
- Concrete, everyday topics
- Heavy use of multiple choice and fill-blanks
- Minimal writing (1-2 sentences)

### A2 (Elementary)
- Simple but slightly longer texts (150-250 words)
- Familiar topics with some descriptive detail
- Introduce short answer questions
- Brief paragraph writing (3-5 sentences)

### B1 (Intermediate)
- Moderately complex texts (250-400 words)
- Abstract concepts introduced
- More open-ended questions
- Paragraph and short essay writing
- Discussion prompts

### B2 (Upper-Intermediate)
- Complex texts with nuanced language (400-600 words)
- Abstract topics and opinions
- Critical thinking questions
- Structured essays
- Debate and discussion

### C1-C2 (Advanced/Proficient)
- Sophisticated texts (600+ words)
- Specialized vocabulary
- Analysis and evaluation tasks
- Extended writing
- Complex discussions

## Examples

### Example 1: A2 Spanish - Food (30 min)

```json
{
  "exercises": [
    {
      "id": "ex-1",
      "type": "text-passage",
      "title": "Reading: La Comida Mexicana",
      "description": "A brief introduction to Mexican cuisine and common dishes",
      "estimatedDuration": 8,
      "parameters": {
        "wordCount": 200,
        "difficulty": "A2",
        "focusArea": "food vocabulary"
      },
      "dependencies": []
    },
    {
      "id": "ex-2",
      "type": "multiple-choice",
      "title": "Comprehension: Understanding the Text",
      "description": "Questions about the reading passage",
      "estimatedDuration": 10,
      "parameters": {
        "questionCount": 8,
        "focusArea": "reading comprehension"
      },
      "dependencies": ["ex-1"]
    },
    {
      "id": "ex-3",
      "type": "fill-blanks",
      "title": "Vocabulary Practice: Food Words",
      "description": "Fill in missing food-related vocabulary",
      "estimatedDuration": 7,
      "parameters": {
        "sentenceCount": 10,
        "focusArea": "food vocabulary"
      },
      "dependencies": ["ex-1"]
    },
    {
      "id": "ex-4",
      "type": "short-answer",
      "title": "Personal Response: Your Favorite Food",
      "description": "Answer questions about your food preferences in Spanish",
      "estimatedDuration": 5,
      "parameters": {
        "questionCount": 3,
        "expectedLength": "2-3 sentences per answer"
      },
      "dependencies": ["ex-1", "ex-2", "ex-3"]
    }
  ],
  "totalDuration": 30,
  "sequenceRationale": "Begins with input (reading) to introduce vocabulary, followed by comprehension check, then vocabulary reinforcement through fill-in-the-blanks, and concludes with personal production to apply learned vocabulary in context.",
  "learningObjectives": [
    "Recognize and understand 20+ food-related vocabulary words in Spanish",
    "Demonstrate reading comprehension of A2-level text about Mexican cuisine",
    "Correctly use food vocabulary in context through fill-in-the-blank exercises",
    "Express personal food preferences in simple Spanish sentences"
  ]
}
```

### Example 2: B1 English - Technology (45 min)

```json
{
  "exercises": [
    {
      "id": "ex-1",
      "type": "text-passage",
      "title": "Reading: The Impact of Social Media",
      "description": "An article discussing positive and negative effects of social media",
      "estimatedDuration": 12,
      "parameters": {
        "wordCount": 400,
        "difficulty": "B1",
        "genre": "informative"
      },
      "dependencies": []
    },
    {
      "id": "ex-2",
      "type": "true-false",
      "title": "Quick Check: Main Ideas",
      "description": "Identify true/false statements about the article",
      "estimatedDuration": 6,
      "parameters": {
        "statementCount": 10,
        "focusArea": "main ideas"
      },
      "dependencies": ["ex-1"]
    },
    {
      "id": "ex-3",
      "type": "multiple-choice",
      "title": "Detailed Comprehension",
      "description": "In-depth questions about the reading",
      "estimatedDuration": 10,
      "parameters": {
        "questionCount": 8,
        "focusArea": "detailed comprehension and inference"
      },
      "dependencies": ["ex-1"]
    },
    {
      "id": "ex-4",
      "type": "discussion-prompt",
      "title": "Discussion: Your View on Social Media",
      "description": "Reflect on and discuss your own social media usage",
      "estimatedDuration": 7,
      "parameters": {
        "guidingQuestionCount": 4
      },
      "dependencies": ["ex-1", "ex-3"]
    },
    {
      "id": "ex-5",
      "type": "opinion-writing",
      "title": "Writing: Social Media in Education",
      "description": "Write your opinion on using social media as a learning tool",
      "estimatedDuration": 10,
      "parameters": {
        "wordCountTarget": { "min": 100, "max": 150 },
        "format": "opinion paragraph"
      },
      "dependencies": ["ex-1", "ex-3", "ex-4"]
    }
  ],
  "totalDuration": 45,
  "sequenceRationale": "Introduces topic through reading, checks basic understanding with true/false, deepens comprehension with multiple choice, prompts critical thinking through discussion, and culminates in opinion writing that synthesizes all previous learning.",
  "learningObjectives": [
    "Understand and analyze a B1-level text about technology and social media",
    "Identify main ideas and supporting details in informational text",
    "Engage in thoughtful discussion about technology's role in society",
    "Express and justify personal opinions in a structured written format",
    "Use technology-related vocabulary appropriately in context"
  ]
}
```

## Important Notes

- All exercise IDs must be unique within the plan
- Estimated durations should sum to approximately the requested total duration
- Dependencies should reference valid exercise IDs
- Parameters should provide specific guidance for content generation
- Consider the cognitive progression from lower to higher order thinking
- Ensure variety in exercise types to maintain engagement
- Return ONLY the JSON object, no additional text
